{%extends 'account/base.html'%}

{%block body%}
<section class="section-container">
    <!-- Page content-->
    <div class="content-wrapper">
       {% include 'account/message.html' %}
       <div class="row">
        <div class="col-xl-12">
            {%if obj%}
           <!-- START card-->
           <div class="card card-default p-3">
              <div class="card-header"><center><h3>All Book Request</h3></center> </div>
              <div class="card-body">
                 <!-- START table-responsive-->
                 <div class="table-responsive">
                    <table class="table table-striped table-bordered table-hover">
                       <thead>
                        <tr>
                            <th>No.</th>
                            <th>Request By</th>
                            <th>Contact No.</th>
                            <th>Title</th>
                            <th>Author</th>
                            <th>Request Date</th>
                            <th>Issue Date</th>
                            <th>Change Status</th>
                            <th>Delete Request</th>
                        </tr>
                       </thead>
                       <tbody>
                           {% for i in obj %}
                            <tr>
                                <td>{{ forloop.counter }}</td>
                                <td><b>{{ i.issue_by }}</b></td>
                                <td><b>{{ i.issue_by.contact }}</b></td>
                                <td>{{ i.book.title }}</td>
                                <td>{{ i.book.author }}</td>
                                <td><b>{{ i.request_date }}</b></td>
                                <td id="issue_date{{ i.id }}">{% if i.issue_date %}{{ i.issue_date }} {% else %} -- {% endif %}</td>
                                <td>
                                    {% if i.status == 0 %}
                                            <a class="btn btn-success" href="{% url 'book:acceptrequest' id=i.id %}">Issue <i class="fas fa-check fa-1x"></i></a>
                                        </td>
                                        <td>
                                            <a class="btn btn-danger" href="{% url 'book:deleterequest' id=i.id %}"><i class="fas fa-trash"></i> Remove</a>
                                        </td>
                                    {% elif i.status == 1 %}
                                        Already Issue
                                        </td>
                                        <td>--</td>
                                    {% endif %}           
                            </tr>
                            {% endfor %}
                       </tbody>
                    </table>
                 </div><!-- END table-responsive-->
              </div>
           </div><!-- END card-->
           {%else%}
           <div class="col-sm-12">
            <br>
            <div class="alert alert-warning text-center" style="width:80%;margin: 0 auto;">
                <a class="alert-link">Not any book requested..!</a>
            </div>
            </div>
           {%endif%}
        </div>
     </div>

    </div>
</section>


{%endblock body%}